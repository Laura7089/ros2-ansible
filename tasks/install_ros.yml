---
- name: create install location
  file:
    path: "{{ ros2_install_location }}"
    state: directory
    mode: "0755"
- name: check for ros2 install
  stat:
    path: "{{ ros2_install_location}}/ros2-linux"
  register: ros2_installed
- name: download ros release
  notify: delete ros2 temp
  when: ros2_installed.stat.isdir == false
  get_url:
    url: "https://github.com/ros2/ros2/releases/download/release-{{ ros2_release }}/ros2-{{ ros2_release }}-linux-focal-amd64.tar.bz2"
    dest: "/tmp/ros.tar.bz2"
- name: extract ros release
  when: ros2_installed.stat.isdir == false
  unarchive:
    dest: "{{ ros2_install_location }}"
    src: "/tmp/ros.tar.bz2"
    remote_src: yes
